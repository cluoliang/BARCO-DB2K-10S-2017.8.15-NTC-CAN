

#include "main.h"

unsigned int Ttable[181][2]={
	0x0FCF,55,
	0x0FCC,54,
	0x0FC8,53,
	0x0FC4,52,
	0x0FC0,51,
	0x0FBC,50,
	0x0FB7,49,
	0x0FB2,48,
	0x0FAD,47,
	0x0FA7,46,
	0x0FA1,45,
	0x0F9B,44,
	0x0F94,43,
	0x0F8D,42,
	0x0F85,41,
	0x0F7D,40,
	0x0F75,39,
	0x0F6C,38,
	0x0F63,37,
	0x0F59,36,
	0x0F4F,35,
	0x0F44,34,
	0x0F39,33,
	0x0F2D,32,
	0x0F21,31,
	0x0F14,30,
	0x0F06,29,
	0x0EF8,28,
	0x0EE9,27,
	0x0ED9,26,
	0x0EC9,25,
	0x0EB8,24,
	0x0EA6,23,
	0x0E94,22,
	0x0E81,21,
	0x0E6D,20,
	0x0E58,19,
	0x0E43,18,
	0x0E2D,17,
	0x0E15,16,
	0x0DFE,15,
	0x0DE5,14,
	0x0DCB,13,
	0x0DB1,12,
	0x0D95,11,
	0x0D79,10,
	0x0D5C,9,
	0x0D3E,8,
	0x0D20,7,
	0x0D00,6,
	0x0CE0,5,
	0x0CBE,4,
	0x0C9C,3,
	0x0C79,2,
	0x0C56,1,
	0x0C31,0,
	0x0C0C,1,
	0x0BE6,2,
	0x0BBF,3,
	0x0B98,4,
	0x0B70,5,
	0x0B47,6,
	0x0B1E,7,
	0x0AF4,8,
	0x0AC9,9,
	0x0AA0,10,
	0x0A73,11,
	0x0A48,12,
	0x0A1C,13,
	0x09EF,14,
	0x09C3,15,
	0x0996,16,
	0x0969,17,
	0x093C,18,
	0x090E,19,
	0x08E1,20,
	0x08B4,21,
	0x0886,22,
	0x0859,23,
	0x082C,24,
	0x0800,25,
	0x07D3,26,
	0x07A6,27,
	0x077A,28,
	0x074F,29,
	0x0724,30,
	0x06F9,31,
	0x06CE,32,
	0x06A4,33,
	0x067B,34,
	0x0652,35,
	0x0629,36,
	0x0602,37,
	0x05DA,38,
	0x05B4,39,
	0x058E,40,
	0x0569,41,
	0x0544,42,
	0x0520,43,
	0x04FD,44,
	0x04DA,45,
	0x04B9,46,
	0x0497,47,
	0x0477,48,
	0x0457,49,
	0x0437,50,
	0x041A,51,
	0x03FC,52,
	0x03E0,53,
	0x03C4,54,
	0x03A8,55,
	0x038D,56,
	0x0373,57,
	0x035A,58,
	0x0341,59,
	0x0329,60,
	0x0312,61,
	0x02FB,62,
	0x02E5,63,
	0x02CF,64,
	0x02BA,65,
	0x02A6,66,
	0x0292,67,
	0x027F,68,
	0x026C,69,
	0x025A,70,
	0x0248,71,
	0x0238,72,
	0x0227,73,
	0x0217,74,
	0x0207,75,
	0x01F8,76,
	0x01E9,77,
	0x01DB,78,
	0x01CD,79,
	0x01C0,80,
	0x01B3,81,
	0x01A6,82,
	0x019A,83,
	0x018E,84,
	0x0183,85,
	0x0178,86,
	0x016D,87,
	0x0163,88,
	0x0158,89,
	0x014F,90,
	0x0145,91,
	0x013C,92,
	0x0133,93,
	0x012A,94,
	0x0122,95,
	0x011A,96,
	0x0112,97,
	0x010A,98,
	0x0102,99,
	0x0FC,100,
	0x0F4,101,
	0x0EE,102,
	0x0E7,103,
	0x0E1,104,
	0x0DB,105,
	0x0D5,106,
	0x0CF,107,
	0x0C9,108,
	0x0C4,109,
	0x0BE,110,
	0x0B9,111,
	0x0B4,112,
	0x0B0,113,
	0x0AB,114,
	0x0A6,115,
	0x0A2,116,
	0x09D,117,
	0x099,118,
	0x095,119,
	0x091,120,
	0x08D,121,
	0x08A,122,
	0x086,123,
	0x083,124,
	0x080,125
};




uint8_t T_dis(unsigned int NTC_R)
{
        
	 uint8_t mad,min,max,temperature;
	 uint8_t i;
	if(NTC_R>Ttable[1][0]) return 0xFF;
	if(NTC_R<Ttable[180][0]) return 0xFF;
	
	min = 0;
	max = 181;
	mad = (min+max)/2;

	if(NTC_R>=Ttable[mad][0])
	{
		min = 0;
		max = mad;
	}
	else
	{
		min = mad;
		max=181;
	}
	for(i=min;i<max;i++){
		if(NTC_R <= Ttable[i][0] && NTC_R > Ttable[i+1][0]){
			if(NTC_R>0x0c31)
			{
				temperature = ~((uint8_t)Ttable[i][1])+1;	
			}
			else
			{
					 temperature=Ttable[i][1];
			}
	 break;		
	}
		}
		return temperature; 
}

